<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Page Context Tool Demo - AI Chat Widget</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      line-height: 1.6;
      color: #1a1a1a;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 1100px;
      margin: 0 auto;
    }

    header {
      text-align: center;
      color: white;
      padding: 30px 0;
    }

    header h1 {
      font-size: 2.2rem;
      margin-bottom: 10px;
      text-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }

    header p {
      font-size: 1.1rem;
      opacity: 0.9;
    }

    .demo-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .card {
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.15);
      overflow: hidden;
    }

    .card-header {
      background: #f8fafc;
      padding: 15px 20px;
      border-bottom: 1px solid #e2e8f0;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .card-header .icon {
      font-size: 1.5rem;
    }

    .card-header h2 {
      font-size: 1.1rem;
      color: #334155;
    }

    .card-body {
      padding: 20px;
    }

    /* Data Table Section */
    .data-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 14px;
    }

    .data-table th,
    .data-table td {
      padding: 10px 12px;
      text-align: left;
      border-bottom: 1px solid #e2e8f0;
    }

    .data-table th {
      background: #f1f5f9;
      font-weight: 600;
      color: #475569;
    }

    .data-table tr:hover {
      background: #f8fafc;
    }

    .status {
      display: inline-block;
      padding: 3px 10px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 500;
    }

    .status-success { background: #dcfce7; color: #166534; }
    .status-warning { background: #fef3c7; color: #92400e; }
    .status-info { background: #dbeafe; color: #1e40af; }
    .status-error { background: #fee2e2; color: #991b1b; }

    /* Form Section */
    .form-group {
      margin-bottom: 15px;
    }

    .form-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: 500;
      color: #374151;
      font-size: 14px;
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 10px 12px;
      border: 1px solid #d1d5db;
      border-radius: 6px;
      font-size: 14px;
      transition: border-color 0.2s;
    }

    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    .form-group textarea {
      height: 80px;
      resize: vertical;
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
    }

    /* Product Cards */
    .product-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 15px;
    }

    .product-card {
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      padding: 15px;
      text-align: center;
    }

    .product-card .price {
      font-size: 1.3rem;
      font-weight: 700;
      color: #667eea;
      margin: 8px 0;
    }

    .product-card .name {
      font-weight: 600;
      color: #1e293b;
    }

    .product-card .stock {
      font-size: 12px;
      color: #64748b;
      margin-top: 5px;
    }

    /* Stats Section */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 15px;
    }

    .stat-item {
      text-align: center;
      padding: 15px;
      background: #f8fafc;
      border-radius: 8px;
    }

    .stat-value {
      font-size: 1.8rem;
      font-weight: 700;
      color: #667eea;
    }

    .stat-label {
      font-size: 13px;
      color: #64748b;
      margin-top: 5px;
    }

    /* Try These Section */
    .try-section {
      background: white;
      border-radius: 12px;
      padding: 25px;
      margin-top: 20px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.15);
    }

    .try-section h2 {
      color: #334155;
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .prompt-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 12px;
    }

    .prompt-item {
      background: #f1f5f9;
      padding: 12px 15px;
      border-radius: 8px;
      font-size: 14px;
      color: #475569;
      cursor: pointer;
      transition: all 0.2s;
      border: 2px solid transparent;
    }

    .prompt-item:hover {
      background: #e2e8f0;
      border-color: #667eea;
    }

    .prompt-item code {
      background: #dbeafe;
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 12px;
      color: #1e40af;
    }

    .prompt-category {
      font-weight: 600;
      color: #667eea;
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 4px;
    }

    footer {
      text-align: center;
      padding: 30px;
      color: rgba(255,255,255,0.8);
      font-size: 14px;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .form-row {
        grid-template-columns: 1fr;
      }

      .product-grid,
      .stats-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>Page Context Tool Demo</h1>
      <p>Test the AI's ability to read and understand page content using the <code>getPageContent</code> tool</p>
    </header>

    <div class="demo-grid">
      <!-- Orders Table -->
      <div class="card">
        <div class="card-header">
          <span class="icon">üì¶</span>
          <h2>Recent Orders</h2>
        </div>
        <div class="card-body">
          <table class="data-table">
            <thead>
              <tr>
                <th>Order ID</th>
                <th>Product</th>
                <th>Amount</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>ORD-7291</td>
                <td>MacBook Pro 14"</td>
                <td>$1,999.00</td>
                <td><span class="status status-success">Delivered</span></td>
              </tr>
              <tr>
                <td>ORD-7290</td>
                <td>AirPods Pro</td>
                <td>$249.00</td>
                <td><span class="status status-info">Shipped</span></td>
              </tr>
              <tr>
                <td>ORD-7289</td>
                <td>Magic Keyboard</td>
                <td>$299.00</td>
                <td><span class="status status-warning">Processing</span></td>
              </tr>
              <tr>
                <td>ORD-7288</td>
                <td>iPhone 15 Pro</td>
                <td>$1,199.00</td>
                <td><span class="status status-error">Cancelled</span></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Support Form -->
      <div class="card">
        <div class="card-header">
          <span class="icon">üìù</span>
          <h2>Contact Support</h2>
        </div>
        <div class="card-body">
          <form id="support-form">
            <div class="form-row">
              <div class="form-group">
                <label for="name">Full Name</label>
                <input type="text" id="name" name="name" value="John Smith">
              </div>
              <div class="form-group">
                <label for="email">Email Address</label>
                <input type="email" id="email" name="email" value="john.smith@example.com">
              </div>
            </div>
            <div class="form-group">
              <label for="category">Issue Category</label>
              <select id="category" name="category">
                <option value="billing">Billing Question</option>
                <option value="shipping" selected>Shipping Issue</option>
                <option value="returns">Returns & Refunds</option>
                <option value="technical">Technical Support</option>
              </select>
            </div>
            <div class="form-group">
              <label for="order-ref">Order Reference</label>
              <input type="text" id="order-ref" name="order-ref" value="ORD-7289" placeholder="e.g., ORD-1234">
            </div>
            <div class="form-group">
              <label for="message">Describe Your Issue</label>
              <textarea id="message" name="message" placeholder="Please describe your issue...">My Magic Keyboard order has been processing for 3 days. When will it ship?</textarea>
            </div>
          </form>
        </div>
      </div>

      <!-- Products -->
      <div class="card">
        <div class="card-header">
          <span class="icon">üõçÔ∏è</span>
          <h2>Featured Products</h2>
        </div>
        <div class="card-body">
          <div class="product-grid">
            <div class="product-card">
              <div class="name">Studio Display</div>
              <div class="price">$1,599</div>
              <div class="stock">In Stock (12 units)</div>
            </div>
            <div class="product-card">
              <div class="name">Mac Mini M2</div>
              <div class="price">$599</div>
              <div class="stock">In Stock (28 units)</div>
            </div>
            <div class="product-card">
              <div class="name">iPad Pro 12.9"</div>
              <div class="price">$1,099</div>
              <div class="stock">Low Stock (3 units)</div>
            </div>
            <div class="product-card">
              <div class="name">Apple Watch Ultra</div>
              <div class="price">$799</div>
              <div class="stock">Out of Stock</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Account Stats -->
      <div class="card">
        <div class="card-header">
          <span class="icon">üìä</span>
          <h2>Account Summary</h2>
        </div>
        <div class="card-body">
          <div class="stats-grid">
            <div class="stat-item">
              <div class="stat-value">47</div>
              <div class="stat-label">Total Orders</div>
            </div>
            <div class="stat-item">
              <div class="stat-value">$12,847</div>
              <div class="stat-label">Lifetime Spend</div>
            </div>
            <div class="stat-item">
              <div class="stat-value">Gold</div>
              <div class="stat-label">Member Status</div>
            </div>
            <div class="stat-item">
              <div class="stat-value">2,450</div>
              <div class="stat-label">Reward Points</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Try These Prompts -->
    <div class="try-section">
      <h2><span>üí¨</span> Try These Prompts</h2>
      <p style="color: #64748b; margin-bottom: 20px;">Click any prompt to send it to the chat, or type your own questions about the page content.</p>

      <div class="prompt-grid">
        <div class="prompt-item" onclick="sendPrompt(this)">
          <div class="prompt-category">Tables</div>
          What orders do I have and what are their statuses?
        </div>
        <div class="prompt-item" onclick="sendPrompt(this)">
          <div class="prompt-category">Tables</div>
          Which order was cancelled and how much was it?
        </div>
        <div class="prompt-item" onclick="sendPrompt(this)">
          <div class="prompt-category">Tables</div>
          What's the total value of my delivered orders?
        </div>
        <div class="prompt-item" onclick="sendPrompt(this)">
          <div class="prompt-category">Forms</div>
          What information is filled in the support form?
        </div>
        <div class="prompt-item" onclick="sendPrompt(this)">
          <div class="prompt-category">Forms</div>
          Help me improve my support message to get faster help
        </div>
        <div class="prompt-item" onclick="sendPrompt(this)">
          <div class="prompt-category">Products</div>
          Which products are in stock and which aren't?
        </div>
        <div class="prompt-item" onclick="sendPrompt(this)">
          <div class="prompt-category">Products</div>
          What's the cheapest product available?
        </div>
        <div class="prompt-item" onclick="sendPrompt(this)">
          <div class="prompt-category">Stats</div>
          Summarize my account - status, spending, and points
        </div>
        <div class="prompt-item" onclick="sendPrompt(this)">
          <div class="prompt-category">General</div>
          What can I do on this page?
        </div>
        <div class="prompt-item" onclick="sendPrompt(this)">
          <div class="prompt-category">No Tool Needed</div>
          What's 25% of $1,599?
        </div>
      </div>
    </div>
  </div>

  <footer>
    <p>AI Chat Widget - Page Context Demo</p>
  </footer>

  <!-- Chat Widget Configuration -->
  <script>
    window.ChatWidgetConfig = {
      agentEndpoint: 'http://localhost:8001/agents/support',
      position: 'bottom-right',
      primaryColor: '#667eea',
      chatWidth: 400,
      chatHeight: 550,
      headerTitle: 'Page Context Demo',
      welcomeMessage: 'Hi! I can see and understand the content on this page. Try asking me about the orders, products, forms, or account stats you see!',
      placeholder: 'Ask about the page...',
      openOnLoad: false,
      persistSession: false,  // Fresh session for demo
      pushContent: false,
      enableMarkdown: true,
      syntaxHighlighting: true,
      syntaxTheme: 'github-dark',
      includePageContext: true,
      pageContextSelector: '.container'
    };

    // Helper to send prompts from the demo buttons
    function sendPrompt(element) {
      const text = element.innerText.replace(/^[A-Z\s]+\n/, '').trim();
      if (window.ChatWidget && window.ChatWidget.open) {
        window.ChatWidget.open();
        setTimeout(() => {
          window.ChatWidget.sendMessage(text);
        }, 300);
      }
    }
  </script>

  <!-- Load the widget -->
  <script src="../dist/chat-widget.js"></script>
</body>
</html>
